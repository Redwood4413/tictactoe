(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const n of document.querySelectorAll('link[rel="modulepreload"]'))l(n);new MutationObserver(n=>{for(const o of n)if(o.type==="childList")for(const a of o.addedNodes)a.tagName==="LINK"&&a.rel==="modulepreload"&&l(a)}).observe(document,{childList:!0,subtree:!0});function i(n){const o={};return n.integrity&&(o.integrity=n.integrity),n.referrerpolicy&&(o.referrerPolicy=n.referrerpolicy),n.crossorigin==="use-credentials"?o.credentials="include":n.crossorigin==="anonymous"?o.credentials="omit":o.credentials="same-origin",o}function l(n){if(n.ep)return;n.ep=!0;const o=i(n);fetch(n.href,o)}})();const ae="1.0.2",se=document.querySelector(".starting-field-wrapper small");se.innerHTML=ae;const b=document.querySelector(".playing-board"),ce=document.querySelector(".wrapper"),C=document.querySelector(".first-avatar"),R=document.querySelector(".second-avatar"),S=document.querySelector(".play-button"),ue=document.querySelectorAll(".random-button"),de=document.querySelector(".first-nickname-display"),pe=document.querySelector(".second-nickname-display"),E=document.querySelector(".first-nickname-input"),D=document.querySelector(".second-nickname-input"),B=document.querySelector(".first-points"),O=document.querySelector(".second-points"),Y=document.querySelector(".move-count"),s=document.querySelector(".input-in-row"),f=document.querySelector(".input-size"),d=document.querySelector(".input-points"),_=document.querySelector(".alert-box"),W=document.querySelector(".counting-down-field"),V=document.querySelector(".moving-field"),ye=document.querySelectorAll(".point-limit"),M=document.querySelector(".starting-field"),P=document.querySelector(".end-avatar-display"),J=document.querySelector(".end-nickname-display"),Q=document.querySelector(".first-dropdown-points"),K=document.querySelector(".second-dropdown-points"),k=document.querySelector(".end-round"),$=document.querySelector(".end-game"),Z='<div class="circle"></div>',ee='<div class="cross"></div>';let h=[],L,m,w,I,p,H=0,g=null,T=3,U=!1,te=null,N="other-player",r={player_1:{ID:1,nickname:"Guest",points:0,sign:String},player_2:{ID:2,nickname:"Guest",points:0,sign:String}};B.innerHTML=r.player_1.points;O.innerHTML=r.player_2.points;Q.innerHTML=r.player_1.points;K.innerHTML=r.player_2.points;function X(){Math.random()>=.5?(C.style.border="4px rgb(23, 189, 23) solid",p=r.player_1.ID,r.player_1.sign=ee,r.player_2.sign=Z):(R.style.border="4px rgb(23, 189, 23) solid",p=r.player_2.ID,r.player_2.sign=ee,r.player_1.sign=Z)}function z(){L>99&&(L=99,m=99),ne(),b.style.width=`${120*m}px`,k.style.width=`${120*m}px`,W.style.width=`${120*m}px`,V.style.width=`${120*m}px`,$.style.width=`${120*m}px`;for(let e=0;e<m;e++)for(let t=0;t<L;t++){const i=document.createElement("div");i.setAttribute("class","square"),i.setAttribute("x",`${t}`),i.setAttribute("y",`${e}`),i.setAttribute("clickID","0"),i.addEventListener("click",fe),h.push(i)}h.forEach(e=>{b.appendChild(e)})}function fe(e){const t=e.currentTarget;w=Number(t.getAttribute("x")),I=Number(t.getAttribute("y")),t.getAttribute("clickID")==="0"&&(window.navigator.vibrate(35),H+=1,Y.innerHTML=H,e.target.classList.remove("square-hover"),console.log({playingWith:N}),p==r.player_1.ID?(t.setAttribute("clickID",r.player_1.ID),t.innerHTML=r.player_1.sign):N=="other-player"&&(t.setAttribute("clickID",r.player_2.ID),t.innerHTML=r.player_2.sign),me(),be(),L*m==H?k.style.display="flex":N=="other-player"&&ge())}function ge(){p===r.player_1.ID?(p=r.player_2.ID,g||(C.style.border="",R.style.border="3px rgb(23, 189, 23) solid")):(p=r.player_1.ID,g||(R.style.border="",C.style.border="3px rgb(23, 189, 23) solid"))}function me(){let e,t=0,i=0;const l=[];for(let n=0;n<m;n++)if(e=h.find(o=>o.getAttribute("x")==w&&o.getAttribute("y")==n),e.getAttribute("clickID")==p?(i+=1,l.push(e),i==T&&(g=p,x(),d.value==r.player_1.points||d.value==r.player_2.points?q():k.style.display="flex")):(l.pop(e),i=0),g){l.forEach(o=>o.style.backgroundColor="green");break}for(let n=0;n<L;n++)if(e=h.find(o=>o.getAttribute("y")==I&&o.getAttribute("x")==n),e.getAttribute("clickID")==p?(t+=1,l.push(e),t==T&&(g=p,x(),d.value==r.player_1.points||d.value==r.player_2.points?q():k.style.display="flex")):(l.pop(e),t=0),g){l.forEach(o=>o.style.backgroundColor="green");break}}function be(){let e,t=0,i=0,l=0,n=0;const o=[];for(let a=0;a<m;a++)if(e=h.find(u=>u.getAttribute("x")==w+a&&u.getAttribute("y")==I+a),!!e&&(e.getAttribute("clickID")==p?(t+=1,o.push(e),t==T&&(g=p,x(),d.value==r.player_1.points||d.value==r.player_2.points?q():k.style.display="flex")):(o.pop(e),t=0),g)){o.forEach(u=>u.style.backgroundColor="green");break}for(let a=0;a<m;a++)if(e=h.find(u=>u.getAttribute("x")==w-a&&u.getAttribute("y")==I-a),!!e&&(e.getAttribute("clickID")==p?(i+=1,o.push(e),i==T&&(g=p,x(),d.value==r.player_1.points||d.value==r.player_2.points?q():k.style.display="flex")):(o.pop(e),i=0),g)){o.forEach(u=>u.style.backgroundColor="green");break}for(let a=0;a<m;a++)if(e=h.find(u=>u.getAttribute("x")==w+a&&u.getAttribute("y")==I-a),!!e&&(e.getAttribute("clickID")==p?(l+=1,o.push(e),l==T&&(g=p,x(),d.value==r.player_1.points||d.value==r.player_2.points?q():k.style.display="flex")):(o.pop(e),l=0),g)){o.forEach(u=>u.style.backgroundColor="green");break}for(let a=0;a<m;a++)if(e=h.find(u=>u.getAttribute("x")==w-a&&u.getAttribute("y")==I+a),!!e&&(e.getAttribute("clickID")==p?(n+=1,o.push(e),n==T&&(g=p,x(),d.value==r.player_1.points||d.value==r.player_2.points?q():k.style.display="flex")):(o.pop(e),n=0),g)){o.forEach(u=>u.style.backgroundColor="green");break}}function x(){g==1?(r.player_1.points+=1,B.innerHTML=r.player_1.points,Q.innerHTML=r.player_1.points):(r.player_2.points+=1,O.innerHTML=r.player_2.points,K.innerHTML=r.player_2.points)}function ve(){c[1].getAttribute("clicked")==="false"?N="other-player":N="bot",$.style.display=="flex"&&($.style.display="none",r.player_1.points=0,B.innerHTML=r.player_1.points,Q.innerHTML=r.player_1.points,r.player_2.points=0,O.innerHTML=r.player_2.points,K.innerHTML=r.player_2.points,Y.innerHTML=0,C.style.border="",R.style.border=""),ye.forEach(l=>l.innerHTML=d.value),(s.value<3||s.value>99)&&(f.value<=5&&f.value>=3?T=f.value:T=5),E.value&&(r.player_1.nickname=E.value),D.value&&(r.player_2.nickname=D.value),de.innerHTML=r.player_1.nickname,pe.innerHTML=r.player_2.nickname,T=s.value,E.value&&(r.player_1.nickname=E.value),D.value&&(r.player_2.nickname=D.value);let e;clearInterval(e),e=setInterval(i,1e3);let t=3;function i(){W.style.display="flex",t>=0?(W.innerHTML=t,t--):(clearInterval(e),X(),W.style.display="none")}i(),Ae()}function ke(e){let t=Math.floor(Math.random()*59),i=Math.floor(Math.random()*59);e.target.getAttribute("id")=="1"?(r.player_1.nickname=`${firstName[t]} ${secondName[i]}`,E.value=r.player_1.nickname):(r.player_2.nickname=`${firstName[t]} ${secondName[i]}`,D.value=r.player_2.nickname)}function q(){$.style.display="flex",g==1?(P.style.background='url("images/first.png") no-repeat center ',J.innerHTML=r.player_1.nickname,P.style.backgroundSize="80px"):(P.style.background='url("images/second.png") no-repeat center ',J.innerHTML=r.player_2.nickname,P.style.backgroundSize="80px")}function re(){H=0,Y.innerHTML=H,ne(),window.navigator.vibrate(35),C.style.border="",R.style.border="",k.style.display="none",z(),X(),g=null}function ne(){h.forEach(e=>{b.removeChild(e)}),h=[]}function j(){const e=_.querySelector('div[id="1"]'),t=_.querySelector('div[id="2"]'),i=_.querySelector('div[id="3"]'),l=_.querySelector('div[id="4"]');let n=!0,o=!0,a=!0,u=!0;if(d.value=Math.floor(d.value),d.value<3||d.value>99){n=!1,S.disabled=!0,d.style.borderImage="linear-gradient(rgb(209, 26, 26), rgb(194, 52, 24)) 1";const A=document.createTextNode("Points are must be set between 3 and 99."),y=document.createElement("div");y.setAttribute("id","1"),y.append(A),_.append(y),setTimeout(()=>{y.remove()},8e3)}else e==null||e.remove(e),n=!0,d.style.borderImage="linear-gradient(rgb(26, 209, 47), rgb(24, 128, 194)) 1";if(f.value=Math.floor(f.value),f.value<3||f.value>99){o=!1,S.disabled=!0,f.style.borderImage="linear-gradient(rgb(209, 26, 26), rgb(194, 52, 24)) 1";const A=document.createTextNode("Size must be set between 3 and 99."),y=document.createElement("div");y.setAttribute("id","3"),y.append(A),_.append(y),setTimeout(()=>{y.remove()},8e3)}else i==null||i.remove(i),o=!0,f.style.borderImage="linear-gradient(rgb(26, 209, 47), rgb(24, 128, 194)) 1";if(s.disabled=!1,m=f.value,L=f.value,z(),c[2].style.backgroundColor="rgb(64, 64, 64)",c[2].style.color="white",c[2].setAttribute("clicked","false"),f.value<=5&&(s.disabled=!0,s.value=f.value),f.value>=5&&(s.value<5&&(s.value=5),s.setAttribute("min","5"),s.setAttribute("max",f.value)),f.value==3&&(s.disabled=!0,c[2].style.background="rgb(209, 209, 209)",c[2].style.color="black",c[2].setAttribute("clicked","true")),s.value=Math.floor(s.value),s.value<3&&s.value>99){a=!1,S.disabled=!0,s.style.borderImage="linear-gradient(rgb(209, 26, 26), rgb(194, 52, 24)) 1";const A=document.createTextNode("In-row field must be set between 3 and 99."),y=document.createElement("div");y.setAttribute("id","2"),y.append(A),_.append(y),setTimeout(()=>{y.remove()},8e3)}else t==null||t.remove(t),a=!0,s.style.borderImage="linear-gradient(rgb(26, 209, 47), rgb(24, 128, 194)) 1";let le=Number(s.value),oe=Number(f.value);if(le>oe){u=!1,S.disabled=!0,s.style.borderImage="linear-gradient(rgb(209, 26, 26), rgb(194, 52, 24)) 1";const A=document.createTextNode("In-row field can't be greater than Size value."),y=document.createElement("div");y.setAttribute("id","4"),y.append(A),_.append(y),setTimeout(()=>{y.remove()},8e3)}else l==null||l.remove(l),u=!0,s.style.borderImage="linear-gradient(rgb(26, 209, 47), rgb(24, 128, 194)) 1";n&&o&&a&&u&&(S.disabled=!1)}S.addEventListener("click",ve);k.addEventListener("click",re);const c=document.querySelectorAll(".input-section button");c.forEach(e=>{e.addEventListener("mousedown",t=>{t.currentTarget==c[0]&&(t.currentTarget.style.background="rgb(209, 209, 209)",t.currentTarget.style.color="black",t.currentTarget.setAttribute("clicked","true"),c[1].style.backgroundColor="rgb(64, 64, 64)",c[1].style.color="white",c[1].setAttribute("clicked","false")),t.currentTarget==c[1]&&(t.currentTarget.style.background="rgb(209, 209, 209)",t.currentTarget.style.color="black",t.currentTarget.setAttribute("clicked","true"),c[0].style.backgroundColor="rgb(64, 64, 64)",c[0].style.color="white",c[0].setAttribute("clicked","false")),t.currentTarget==c[2]&&(L=3,m=3,f.value=3,T=3,s.value=3,s.disabled=!0,S.disabled=!1,z(),t.currentTarget.style.background="rgb(209, 209, 209)",t.currentTarget.style.color="black",t.currentTarget.setAttribute("clicked","true"),c[3].style.backgroundColor="rgb(64, 64, 64)",c[3].style.color="white",c[3].setAttribute("clicked","false")),t.currentTarget==c[3]&&(s.disabled=!1,s.setAttribute("min","5"),z(),t.currentTarget.style.background="rgb(209, 209, 209)",t.currentTarget.style.color="black",t.currentTarget.setAttribute("clicked","true"),c[2].style.backgroundColor="rgb(64, 64, 64)",c[2].style.color="white",c[2].setAttribute("clicked","false"))})});ue.forEach(e=>{e.addEventListener("click",ke)});ce.addEventListener("wheel",he);function he(e){e.preventDefault(),F+=e.deltaY*-.001,F=Math.min(Math.max(.125,F),5),b.style.transform=`scale(${F})`}let F=1;function ie({movementX:e,movementY:t}){if(!U)return;let i=window.getComputedStyle(b),l=parseInt(i.left),n=parseInt(i.top);b.style.left=`${l+e}px`,b.style.top=`${n+t}px`}b.addEventListener("mousedown",()=>{U=!0,te=setTimeout(()=>{V.style.display="flex",b.addEventListener("mousemove",ie)},120)});document.addEventListener("mouseup",()=>{U=!1,clearTimeout(te),V.style.display="none",b.removeEventListener("mousemove",ie)});d.addEventListener("change",j);s.addEventListener("change",j);f.addEventListener("change",j);$.addEventListener("click",()=>{M.style.visibility="visible",M.style.opacity=1,re()});let v="",G;window.addEventListener("keydown",e=>{const t=document.querySelector(".console-popup");if(e.key=="`"&&(t.style.visibility=="visible"?t.style.visibility="hidden":t.style.visibility="visible"),t.style.visibility=="visible"){if(e.keyCode>=49&&e.keyCode<=90&&(v+=e.key,t.innerHTML=v),e.key=="Enter"&&v.length>0){let i=!1;if(v=="developer"){if(i=!0,G=localStorage.developer,G=="true"){localStorage.developer="false";const l=document.createElement("span"),n=document.createTextNode("Developer mode is toggled OFF.");l.append(n),t.append(l)}else{localStorage.developer="true";const l=document.createElement("span"),n=document.createTextNode("Developer mode is toggled ON.");l.append(n),t.append(l)}v="",Te()}if(v=="kremowka"){i=!0;const l=document.createElement("span"),n=document.createTextNode("2137.");l.append(n),t.append(l),_e(),v=""}if(!i){const l=document.createElement("span"),n=document.createTextNode("Unknown command.");l.append(n),t.append(l),v=""}}e.key=="Backspace"&&(v=v.slice(0,-1),t.innerHTML=v)}});function Te(){const e=document.querySelector(".counting-down-field");G=localStorage.developer,G=="true"?(M.style.visibility="hidden",e.style.visibility="hidden",X()):(M.style.visibility="visible",e.style.visibility="visible"),console.log({turn:p})}function _e(){const e=new Audio("audio/barkaTRAP.mp3");e.volume=.2,e.play();const t=document.createElement("div");t.setAttribute("class","kremowka"),document.body.prepend(t);let i=null,l=-30;clearInterval(i),i=setInterval(n,20);function n(){l>100?(clearInterval(i),document.body.removeChild(t)):(l+=.5,t.style.top=`${l}vh`)}}function Ae(){let e=null,t=100;clearInterval(e),e=setInterval(i,7);function i(){t==0?(clearInterval(e),M.style.visibility="hidden"):(t--,M.style.opacity=`${t}%`)}}b.addEventListener("mouseover",Se);function Se(e){e.target.getAttribute("clickID")=="0"&&!g&&(p==r.player_1.ID?e.target.innerHTML=r.player_1.sign:e.target.innerHTML=r.player_2.sign,e.target.classList.add("square-hover")),b.addEventListener("mouseout",t=>{t.target.getAttribute("clickID")=="0"&&(t.target.innerHTML=""),g||(t.target.classList.remove("square-hover"),k.style.background="rgba(0, 0, 0, 0.302)")})}
